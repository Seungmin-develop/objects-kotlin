# 1장 객체, 설계
로버트 L. 글래스에 의하면 여느 다른 공학 분야에 비해 상대적으로 짧은 소프트웨어 분야의 역사를 감안했을 때 이론보다 실무가 더 앞서 있으며 실무가 더 중요하다.
대표적으로 '소프트웨어 설계'와 '소프트웨어 유지보수'를 들 수 있다.

로버트 마틴은 <클린 소프트웨어: 애자일 원칙과 패턴, 그리고 실천 방법>에서 모든 모듈은 **제대로 실행되어야 하고**, **변경이 용이**해야 하며, **이해하기 쉬워야 한다**고 설명한다.

## 현재 설계의 문제점
- 관람객과 판매원이 소극장의 통제를 받는 수동적인 존재이다.
- 현재 짜여진 코드는 우리의 예상을 벗어난다.
- Theater의 enter() 메서드를 이해하기 위해서는 여러 가지 세부적인 내용들을 한꺼번에 기억하고 있어야 하기 때문에 이해하기 어렵다.
- Audience와 TicketSeller를 변경할 경우 Theater도 함께 변경해야 한다.

의존성은 변경에 대한 영향을 암시한다. 객체지향 설계는 서로 의존하면서 협력하는 객체들의 공동체를 구축하는 것이기 때문에 기능을 구현하는 데 필요한 최소한의 의존성만 유지하고 불필요한 의존성을 제거해야 한다.

객체 사이의 의존성이 과한 경우를 가리켜 **결합도(coupling)가 높다**고 말한다.

## 설계 개선하기
- Theater가 Audience와 TicketSeller에 관해 너무 세세한 부분까지 알지 못하도록 정보를 차단한다.
- 관람객과 판매원을 **자율적인 존재**로 만든다.
- Theater의 enter() 메서드에서 판매하는 로직을 TicketSeller로 옮긴다.

ticketOffice의 가시성이 private이고 접근 가능한 public 메서드가 더 이상 존재하지 않기 때문에 외부에서는 ticketOffice에 직접 접근할 수 없다.
결과적으로 ticketOffice에 대한 접근은 TicketSeller 안에서만 가능하다.

이처럼 개념적이나 물리적으로 객체 내부의 세부적인 사항을 감추는 것을 **캡슐화(encapsulation)** 라고 부른다.
캡슐화의 목적은 변경하기 쉬운 객체를 만드는 것이다. 캡슐화를 통해 객체 내부로의 접근을 제한하면 객체와 객체 사이의 결합도를 낮추므로 설계를 좀 더 쉽게 변경할 수 있다.

핵심은 객체 내부의 상태를 캡슐화하고 객체 간에 오직 메시지를 통해서만 상호작용하도록 만드는 것이다.
밀접하게 연관된 작업만을 수행하고 연관성 없는 작업은 다른 객체에게 위임하는 객체를 가르켜 **응집도(cohesion)** 가 높다고 말한다.
객체의 응집도를 높이기 위해서는 객체 스스로 자신의 데이터를 책임져야 한다.

## 절차지향과 객체지향
프로세스(Process)와 데이터(Data)를 별도의 모듈에 위치시키는 방식을 절차적 프로그래밍(Procedural Programming)이라고 부른다.
반면 데이터와 프로세스가 동일한 모듈 내부에 위치하도록 프로그래밍하는 방식을 객체지향 프로그래밍(Object-Oriented Programming)이라고 부른다.

두 방식 사이에 근본적인 차이를 만드는 것은 **책임의 이동(shift of responsibility)** 이다. 변경 전의 절차적 설계에서는 Theater가 전체적인 작업을 도맡아 처리했지만 변경 후의 객체지향 설계에서는
각 객체가 자신이 맡은 일을 스스로 처리했고 Theater에 몰려 있던 책임이 개별 객체로 이동했다. 이는 책임의 이동을 의미한다.

객체지향 설계의 핵심은 적절한 객체에 적절한 책임을 할당하는 것이다. 객체는 다른 객체와의 협력이라는 문맥 안에서 특정한 역할을 수행하는 데 필요한 적절한 책임을 수행해야 한다.
따라서 객체가 어떤 데이터를 가지느냐보다는 객체에 어떤 책임을 할당할 것이냐에 초점을 맞춰야 한다.

어떤 기능을 설계하는 방법은 한 가지 이상일 수 있다.
동일한 기능을 한 가지 이상의 방법으로 설계할 수 있기 때문에 결국 설계는 트레이드오프의 산물이다.
